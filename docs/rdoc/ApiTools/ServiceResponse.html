<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ApiTools::ServiceResponse - RDoc Documentation</title>

<link href="../fonts.css" rel="stylesheet">
<link href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/navigation.js"></script>
<script src="../js/search_index.js"></script>
<script src="../js/search.js"></script>
<script src="../js/searcher.js"></script>
<script src="../js/darkfish.js"></script>


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-add_error">#add_error</a>
    
    <li ><a href="#method-i-add_errors">#add_errors</a>
    
    <li ><a href="#method-i-add_header">#add_header</a>
    
    <li ><a href="#method-i-add_precompiled_error">#add_precompiled_error</a>
    
    <li ><a href="#method-i-for_rack">#for_rack</a>
    
    <li ><a href="#method-i-get_header">#get_header</a>
    
    <li ><a href="#method-i-halt_processing-3F">#halt_processing?</a>
    
    <li ><a href="#method-i-headers">#headers</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ApiTools::ServiceResponse">
  <h1 id="class-ApiTools::ServiceResponse" class="class">
    class ApiTools::ServiceResponse
  </h1>

  <section class="description">
    
<p>The service middleware creates an <a
href="ServiceResponse.html">ApiTools::ServiceResponse</a> instance for each
request it handles, populating it with some data before and after the
service implementation runs as part of standard pre- and post-processing.
In the middle, the service implementation is given the instance and adds
its own data to it.</p>

<p>The instance carries data about both error conditions and successful work.
In the successful case, <a
href="ServiceResponse.html#attribute-i-http_status_code">http_status_code</a>
and <a href="ServiceResponse.html#attribute-i-body">body</a> data is set by
the service and used in the response. In the error case (see <a
href="ServiceResponse.html#attribute-i-errors">errors</a>), the HTTP status
code is taken from the first error in the errors collection and the
response body will be the JSON representation of that collection - any HTTP
status code or response body data previously set by the service will be
ignored.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-body" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">body</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>A service implementation can set (and read back, should it wish) the API
call response body data using this <a
href="ServiceResponse.html#attribute-i-body">body</a> / <a
href="ServiceResponse.html#attribute-i-body">body=</a> accessor. This is
converted to a client-facing representation automatically (e.g. to JSON).</p>

<p>The response body <strong>MUST</strong> be either a *Ruby Array* or a *Ruby
Hash*.</p>

<p>This method is aliased as <a
href="ServiceResponse.html#attribute-i-set_resource">set_resource</a>, for
semantic use when you want to set the response body to a representation (as
a Hash) of a resource.</p>

<p>This method is also aliased as <a
href="ServiceResponse.html#attribute-i-set_resources">set_resources</a>,
for semantic use when you want to set the response body to an array of
representations (as Hashes) of resources.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-errors" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">errors</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>Obtain a reference to the <a href="Errors.html">ApiTools::Errors</a>
instance for this response; use <a
href="Errors.html#method-i-add_error">ApiTools::Errors#add_error</a> to add
to the collection directly. For convenience, this class also provides the
<a href="ServiceResponse.html#method-i-add_error">add_error</a> proxy
instance method (syntactic sugar for most service implementations, but with
a return value that helps keep the service middleware code clean).</p>

<p>It&#39;s possible to change the errors object if you want to swap it for
any reason, though this is generally discouraged - especially if the
existing errors collection isn&#39;t empty. The middleware does this as
part of request handling, but generally speaking nobody else should need
to.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-http_status_code" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">http_status_code</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>HTTP status code that will be involved in the response. Default is 200.
Integer, or something that can be converted to one with <code>to_i</code>.
If errors are added to the response then the status code is derived from
the first error in the collection, overriding any value set here. See <a
href="ServiceResponse.html#attribute-i-errors">errors</a>.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-set_resource" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">set_resource</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>A service implementation can set (and read back, should it wish) the API
call response body data using this <a
href="ServiceResponse.html#attribute-i-body">body</a> / <a
href="ServiceResponse.html#attribute-i-body">body=</a> accessor. This is
converted to a client-facing representation automatically (e.g. to JSON).</p>

<p>The response body <strong>MUST</strong> be either a *Ruby Array* or a *Ruby
Hash*.</p>

<p>This method is aliased as <a
href="ServiceResponse.html#attribute-i-set_resource">set_resource</a>, for
semantic use when you want to set the response body to a representation (as
a Hash) of a resource.</p>

<p>This method is also aliased as <a
href="ServiceResponse.html#attribute-i-set_resources">set_resources</a>,
for semantic use when you want to set the response body to an array of
representations (as Hashes) of resources.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-set_resources" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">set_resources</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>A service implementation can set (and read back, should it wish) the API
call response body data using this <a
href="ServiceResponse.html#attribute-i-body">body</a> / <a
href="ServiceResponse.html#attribute-i-body">body=</a> accessor. This is
converted to a client-facing representation automatically (e.g. to JSON).</p>

<p>The response body <strong>MUST</strong> be either a *Ruby Array* or a *Ruby
Hash*.</p>

<p>This method is aliased as <a
href="ServiceResponse.html#attribute-i-set_resource">set_resource</a>, for
semantic use when you want to set the response body to a representation (as
a Hash) of a resource.</p>

<p>This method is also aliased as <a
href="ServiceResponse.html#attribute-i-set_resources">set_resources</a>,
for semantic use when you want to set the response body to an array of
representations (as Hashes) of resources.</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a new instance, ready to take on a response. The service middleware
responsible for doing this.</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/api_tools/service_implementations/service_response.rb, line 72</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>
  <span class="ruby-ivar">@errors</span>           = <span class="ruby-constant">ApiTools</span><span class="ruby-operator">::</span><span class="ruby-constant">Errors</span>.<span class="ruby-identifier">new</span>()
  <span class="ruby-ivar">@headers</span>          = {}
  <span class="ruby-ivar">@http_status_code</span> = <span class="ruby-value">200</span>
  <span class="ruby-ivar">@body</span>             = {}
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-add_error" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_error</span><span
            class="method-args">( code, options = nil )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Add an error to the internal collection. Passes input parameters through to
<a href="Errors.html#method-i-add_error">ApiTools::Errors#add_error</a>, so
see that for details. For convenience, returns the for-rack representation
of the response so far, so that code which wishes to add one error and
abort request processing immediately can just do:</p>

<pre>return response_object.add_error( ... )</pre>

<p>…as part of processing a Rack invocation of the <code>call</code> method.
This is really only useful for the service middleware.</p>
<dl class="rdoc-list note-list"><dt><code>code</code>
<dd>
<p>Error code (e.g. “platform.generic”).</p>
</dd><dt><code>options</code>
<dd>
<p>Options Hash - see <a
href="Errors.html#method-i-add_error">ApiTools::Errors#add_error</a>.</p>
</dd></dl>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">response</span>.<span class="ruby-identifier">add_error</span>(
  <span class="ruby-string">&#39;generic.not_found&#39;</span>,
  <span class="ruby-string">&#39;message&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Optional custom message&#39;</span>,
  <span class="ruby-string">&#39;reference&#39;</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">ident</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;mandatory reference data&#39;</span> }
)
</pre>

<p>In the above example, the mandatory reference data <code>uuid</code> comes
from the description for the &#39;platform.not_found&#39; message - see the
ApiTools::ErrorDescriptions#initialize <em>implementation</em> and Platform
API.</p>
          
          

          
          <div class="method-source-code" id="add_error-source">
            <pre><span class="ruby-comment"># File lib/api_tools/service_implementations/service_response.rb, line 165</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_error</span>( <span class="ruby-identifier">code</span>, <span class="ruby-identifier">options</span> = <span class="ruby-keyword">nil</span> )
  <span class="ruby-ivar">@errors</span>.<span class="ruby-identifier">add_error</span>( <span class="ruby-identifier">code</span>, <span class="ruby-identifier">options</span> )
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">for_rack</span>()
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_errors" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_errors</span><span
            class="method-args">( errors_object )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Add errors from an <a href="Errors.html">ApiTools::Errors</a> instance to
this response&#39;s error collection.</p>
<dl class="rdoc-list note-list"><dt><code>errors_object</code>
<dd>
<p><a href="Errors.html">ApiTools::Errors</a> instance to merge into the error
collection of &#39;this&#39; response object.</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="add_errors-source">
            <pre><span class="ruby-comment"># File lib/api_tools/service_implementations/service_response.rb, line 198</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_errors</span>( <span class="ruby-identifier">errors_object</span> )
  <span class="ruby-ivar">@errors</span>.<span class="ruby-identifier">merge!</span>( <span class="ruby-identifier">errors_object</span> )
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_header</span><span
            class="method-args">( name, value, overwrite = false )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Add an HTTP header to the internal collection that will be used for the
response. Trying to set data for the same HTTP header name more than once
will result in an exception being raised unless the <code>overwrite</code>
parameter is used (this is strongly discouraged in the general case).</p>
<dl class="rdoc-list note-list"><dt><code>name</code>
<dd>
<p>Correct case and punctuation HTTP header name (e.g. “Content-Type”).</p>
</dd><dt><code>value</code>
<dd>
<p>Value for the header, as a string or something that behaves sensibly when
<code>to_s</code> is invoked upon it.</p>
</dd><dt><code>overwrite</code>
<dd>
<p>Optional. Pass <code>true</code> to allow the same HTTP header name to be
set more than once - the new value overwrites the old. By default this is
prohibited and an exception will be raised to avoid accidental value
overwrites.</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="add_header-source">
            <pre><span class="ruby-comment"># File lib/api_tools/service_implementations/service_response.rb, line 104</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_header</span>( <span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">overwrite</span> = <span class="ruby-keyword">false</span> )
  <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">dname</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>

  <span class="ruby-keyword">if</span> ( <span class="ruby-identifier">overwrite</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">has_key?</span>( <span class="ruby-identifier">dname</span> ) )
    <span class="ruby-identifier">hash</span>  = <span class="ruby-ivar">@headers</span>[ <span class="ruby-identifier">dname</span> ]
    <span class="ruby-identifier">name</span>  = <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">keys</span>[ <span class="ruby-value">0</span> ]
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">values</span>[ <span class="ruby-value">0</span> ]
    <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;ApiTools::ServiceResponse\#add_header: Value &#39;#{ value }&#39; already defined for header &#39;#{ name }&#39;&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@headers</span>[ <span class="ruby-identifier">dname</span> ] = { <span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_precompiled_error" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_precompiled_error</span><span
            class="method-args">( code, message, reference, http_status = 500 )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Add a precompiled error to the error collection. Pass error code, error
message and reference data directly.</p>

<p>In most cases you should be calling <a
href="ServiceResponse.html#method-i-add_error">add_error</a> instead,
<strong>NOT</strong> here.</p>

<p>**No validation is performed**. You should only really call here if storing
an error / errors from another, trusted source with assumed validity (e.g.
another service called remotely with errors in the JSON response). It&#39;s
possible to store invalid error data using this call, which means
counter-to-documentation results could be returned to API clients. That is
Very Bad.</p>

<p>Pass optionally the HTTP status code to use if this happens to be the first
stored error. If this is omitted, 500 is kept as the default.</p>

<p>As with <a href="ServiceResponse.html#method-i-add_error">add_error</a>,
returns a Rack representation of the response.</p>
          
          

          
          <div class="method-source-code" id="add_precompiled_error-source">
            <pre><span class="ruby-comment"># File lib/api_tools/service_implementations/service_response.rb, line 187</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_precompiled_error</span>( <span class="ruby-identifier">code</span>, <span class="ruby-identifier">message</span>, <span class="ruby-identifier">reference</span>, <span class="ruby-identifier">http_status</span> = <span class="ruby-value">500</span> )
  <span class="ruby-ivar">@errors</span>.<span class="ruby-identifier">add_precompiled_error</span>( <span class="ruby-identifier">code</span>, <span class="ruby-identifier">message</span>, <span class="ruby-identifier">reference</span>, <span class="ruby-identifier">http_status</span> )
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">for_rack</span>()
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-for_rack" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">for_rack</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Convert the internal response data into something that Rack expects. The
return value of this method can be passed back to Rack from Rack middleware
or applications.</p>
          
          

          
          <div class="method-source-code" id="for_rack-source">
            <pre><span class="ruby-comment"># File lib/api_tools/service_implementations/service_response.rb, line 206</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">for_rack</span>
  <span class="ruby-identifier">rack_response</span> = <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Response</span>.<span class="ruby-identifier">new</span>

  <span class="ruby-comment"># Work out the status code and basic response body</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@errors</span>.<span class="ruby-identifier">has_errors?</span>
    <span class="ruby-identifier">http_status_code</span> = <span class="ruby-ivar">@errors</span>.<span class="ruby-identifier">http_status_code</span>
    <span class="ruby-identifier">body_data</span>        = <span class="ruby-ivar">@errors</span>.<span class="ruby-identifier">render</span>()
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">http_status_code</span> = <span class="ruby-ivar">@http_status_code</span>
    <span class="ruby-identifier">body_data</span>        = <span class="ruby-ivar">@body</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">rack_response</span>.<span class="ruby-identifier">status</span> = <span class="ruby-identifier">http_status_code</span>.<span class="ruby-identifier">to_i</span>

  <span class="ruby-comment"># We&#39;re not using JSON5, so the Platform API says that outmost arrays</span>
  <span class="ruby-comment"># are wrapped with a top-level object key &quot;_data&quot;.</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">body_data</span>.<span class="ruby-identifier">is_a?</span>( <span class="ruby-operator">::</span><span class="ruby-constant">Array</span> )
    <span class="ruby-identifier">response_hash</span> = { <span class="ruby-string">&#39;_data&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">body_data</span> }
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">response_hash</span> = <span class="ruby-identifier">body_data</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">rack_response</span>.<span class="ruby-identifier">write</span>( <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">pretty_generate</span>( <span class="ruby-identifier">response_hash</span> ) )

  <span class="ruby-comment"># Finally, sort out the headers</span>

  <span class="ruby-identifier">headers</span>().<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">header_name</span>, <span class="ruby-identifier">header_value</span> <span class="ruby-operator">|</span>
    <span class="ruby-identifier">rack_response</span>[ <span class="ruby-identifier">header_name</span> ] = <span class="ruby-identifier">header_value</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Return the complete response</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">rack_response</span>.<span class="ruby-identifier">finish</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_header</span><span
            class="method-args">( name )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Check the stored value of a given HTTP header. Checks are case insensitive.
Returns the value stored by a prior <a
href="ServiceResponse.html#method-i-add_header">add_header</a> call, or
<code>nil</code> for no value (or an explicitly stored value of
<code>nil</code>)</p>
<dl class="rdoc-list note-list"><dt><code>name</code>
<dd>
<p>HTTP header name (e.g. “Content-Type”, “CONTENT-TYPE”).</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="get_header-source">
            <pre><span class="ruby-comment"># File lib/api_tools/service_implementations/service_response.rb, line 125</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_header</span>( <span class="ruby-identifier">name</span> )
  <span class="ruby-identifier">value_hash</span> = <span class="ruby-ivar">@headers</span>[ <span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase</span> ]
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value_hash</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">value_hash</span>.<span class="ruby-identifier">values</span>[ <span class="ruby-value">0</span> ]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-halt_processing-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">halt_processing?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns <code>true</code> if processing should halt, e.g. because errors
have been added to the errors collection. Check here whenever you would
consider an early exit due to errors arising in processing (otherwise they
will just continue to accumulate).</p>
          
          

          
          <div class="method-source-code" id="halt_processing-3F-source">
            <pre><span class="ruby-comment"># File lib/api_tools/service_implementations/service_response.rb, line 84</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">halt_processing?</span>
  <span class="ruby-ivar">@errors</span>.<span class="ruby-identifier">has_errors?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-headers" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">headers</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the list previously set headers in a name: value Hash.</p>
          
          

          
          <div class="method-source-code" id="headers-source">
            <pre><span class="ruby-comment"># File lib/api_tools/service_implementations/service_response.rb, line 133</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">headers</span>
  <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">inject</span>( {} ) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">result</span>, <span class="ruby-identifier">kv_array</span> <span class="ruby-operator">|</span>
    <span class="ruby-identifier">result</span>.<span class="ruby-identifier">merge</span>( <span class="ruby-identifier">kv_array</span>[ <span class="ruby-value">1</span> ] )
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

