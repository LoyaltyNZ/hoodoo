<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ApiTools::ServiceContext - RDoc Documentation</title>

<link href="../fonts.css" rel="stylesheet">
<link href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/navigation.js"></script>
<script src="../js/search_index.js"></script>
<script src="../js/search.js"></script>
<script src="../js/searcher.js"></script>
<script src="../js/darkfish.js"></script>


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-resource">#resource</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ApiTools::ServiceContext">
  <h1 id="class-ApiTools::ServiceContext" class="class">
    class ApiTools::ServiceContext
  </h1>

  <section class="description">
    
<p>A collection of objects which describe the context in which a service is
being called. The service reads session and request information and returns
results of its processing via the associated response object.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-request" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">request</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The <a href="ServiceRequest.html">ApiTools::ServiceRequest</a> instance
giving details about the inbound request. Relevant information will depend
upon the endpoint service implementation action being addressed.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-response" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">response</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The <a href="ServiceResponse.html">ApiTools::ServiceResponse</a> instance
that a service implementation updates with results of its processing.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-session" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">session</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The <a href="ServiceSession.html">ApiTools::ServiceSession</a> instance
describing the authorised call context.</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">( session, request, response, middleware )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a new instance.</p>
<dl class="rdoc-list note-list"><dt><code>session</code>
<dd>
<p>See <a href="ServiceContext.html#attribute-i-session">session</a>.</p>
</dd><dt><code>request</code>
<dd>
<p>See <a href="ServiceContext.html#attribute-i-request">request</a>.</p>
</dd><dt><code>response</code>
<dd>
<p>See <a href="ServiceContext.html#attribute-i-response">response</a>.</p>
</dd><dt><code>middleware</code>
<dd>
<p><a href="ServiceMiddleware.html">ApiTools::ServiceMiddleware</a> instance
creating this item.</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/api_tools/service_implementations/service_context.rb, line 42</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>( <span class="ruby-identifier">session</span>, <span class="ruby-identifier">request</span>, <span class="ruby-identifier">response</span>, <span class="ruby-identifier">middleware</span> )
  <span class="ruby-ivar">@session</span>    = <span class="ruby-identifier">session</span>
  <span class="ruby-ivar">@request</span>    = <span class="ruby-identifier">request</span>
  <span class="ruby-ivar">@response</span>   = <span class="ruby-identifier">response</span>
  <span class="ruby-ivar">@middleware</span> = <span class="ruby-identifier">middleware</span>
  <span class="ruby-ivar">@endpoints</span>  = {}
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-resource" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resource</span><span
            class="method-args">( resource_name )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Request (and lazy-initialize) a new resource endpoint instance for talking
to a resource&#39;s interface. See <a
href="ServiceMiddleware/ServiceEndpoint.html">ApiTools::ServiceMiddleware::ServiceEndpoint</a>.</p>

<p>You can request an endpoint for any resource name, whether or not an
implementation actually exists for it. Until you try and talk to the
interface through the endpoint instance, you won&#39;t know if it is there.
Examine the returned value&#39;s <a
href="ServiceResponse.html#attribute-i-http_status_code">ApiTools::ServiceResponse#http_status_code</a>
to see if you got a 404.</p>
<dl class="rdoc-list note-list"><dt><code>resource</code>
<dd>
<p>Resource name for the endpoint, e.g. <code>:Purchase</code>. String or
symbol.</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="resource-source">
            <pre><span class="ruby-comment"># File lib/api_tools/service_implementations/service_context.rb, line 63</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resource</span>( <span class="ruby-identifier">resource_name</span> )
  <span class="ruby-ivar">@endpoints</span>[ <span class="ruby-identifier">resource_name</span>.<span class="ruby-identifier">to_sym</span> ] <span class="ruby-operator">||=</span> <span class="ruby-constant">ApiTools</span><span class="ruby-operator">::</span><span class="ruby-constant">ServiceMiddleware</span><span class="ruby-operator">::</span><span class="ruby-constant">ServiceEndpoint</span>.<span class="ruby-identifier">new</span>( <span class="ruby-ivar">@middleware</span>, <span class="ruby-identifier">resource_name</span> )
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

